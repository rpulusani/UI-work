
<h2 class="heading" translate="DOCUMENT_LIBRARY.COMMON.TXT_DOCUMENT_DETAILS"></h2>
<h4 translate="DOCUMENT_LIBRARY.COMMON.TXT_FILE_DETAILS"></h4>

<div ng-show="documentItem.id !== 'new'">
    <div class="form__field form__field--required vertical-space--thick">

        <div class="deleteConfirmation">
            <div ng-hide="isDeleting">
                <button name="deleteDocument" class="btn btn--default" type="submit" value="submit" 
                        translate="DOCUMENT_LIBRARY.COMMON.BTN_DELETE_DOCUMENT" ng-if="getDeleteAction(documentItem.owner);" ng-click="goToStartDelete()"></button>
            </div>
            <div class="well" ng-show="isDeleting">
                <p class="text--small" translate="DOCUMENT_LIBRARY.COMMON.TXT_DELETE_DOC_ARE_YOU_SURE"></p>
                <p class="text--small" >
                    <a href="#" ng-click="goToCancelDelete()" translate="DOCUMENT_LIBRARY.DOCUMENT_LISTING.CTRL_GRID_CANCEL"></a>
                    <a href="#" ng-click="goToDelete()" translate="DOCUMENT_LIBRARY.COMMON.CTRL_DELETE_DOCUMENT"></a>
                </p>
            </div>
        </div>

    </div>
</div>

<div ng-if="documentItem.id === 'new'">
    <div class="form__field form__field--required vertical-space--thick">
        <label translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_BROWSE_FILE"></label>
        <input valid-file ng-model="documentFileAttach" type="file" name="file" onchange="angular.element(this).scope().setDocumentName(this.files)" accept=".csv,.xls,.xlsx,.vsd,.doc,.docx,.ppt,.pptx,.pdf,.zip" />
        <div class="form__field__helper-text ng-scope" translate="* Acceptable file format: .csv,.xls,.xlsx,.vsd,.doc,.docx,.ppt,.pptx,.pdf,.zip" ng-if="!configure.detail.translate.fileList"></div>
    </div>
</div>

<div ng-show="documentItem.id !== 'new'">
    <div class="form__field form__field--required">   
        <label translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_BROWSE_FILE"></label>{{fullDocNameWithExt}}</div>    
</div>

<div class="form__field form__field--required vertical-space--thick">
    <input name="id" type="hidden" ng-model="documentItem.id"/>
    <input name="accountId" type="hidden" ng-model="documentItem.accountId"/>
    <label translate="DOCUMENT_LIBRARY.COMMON.TXT_DOCUMENT_NAME"></label>
    <input name="name" type="text" ng-model="documentItem.name" value="" class="" required />    
</div>

<div class="form__field vertical-space--thick">
    <label translate="DOCUMENT_LIBRARY.COMMON.TXT_DESCRIPTION"></label>
    <textarea name="description" type="text" rows="8" cols="77" ng-model="documentItem.description" value=""></textarea>
</div>

<h4 translate="DOCUMENT_LIBRARY.COMMON.TXT_TAGGING"></h4>
<div class="row row--alley-thick vertical-space--thick">
    <div class="col-2-3">
        <tags-input ng-model="documentItem.tags" display-property="name" placeholder="{{ 'DOCUMENT_LIBRARY.COMMON.TXT_TAGGING' | translate }}" add-from-autocomplete-only="true" replace-spaces-with-dashes="false">
            <auto-complete source="loadTags($query)" load-on-focus="true" load-on-empty="true" max-results-to-show="100000"></auto-complete>
        </tags-input>
    </div>
</div>

<h4 translate="DOCUMENT_LIBRARY.COMMON.TXT_PUBLISHING"></h4>
<div class="row row--alley-thick">
    <div class="col-1-2">
        <div class="form__field">
            <label translate="DOCUMENT_LIBRARY.COMMON.TXT_PUBLISH_FROM"></label>
            <input type="text" id="dateLeft" ng-model="documentItem.publishDate" date-val="documentItem.publishDate" before-eq="documentItem.endDate" datepicker />
        </div>
    </div>

    <div class="col-1-2">
        <div class="form__field">
            <label translate="DOCUMENT_LIBRARY.COMMON.TXT_PUBLISH_TO"></label>
            <input type="text" id="dateRight" ng-model="documentItem.endDate" date-val="documentItem.endDate" after-eq="documentItem.publishDate" datepicker />
        </div>
    </div>
</div>

<div ng-if="documentLibraryManageStrategicAccess" class="row">
    <div class="col-2-3">
        <p class="text--semi-bold" translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_LIMIT_ACCESS_STRATEGIC"></p>
        <input type="checkbox" name="strategic" ng-model="documentItem.strategic" />
        <label translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.CHK_VISIBILITY_STRATEGIC"></label>
    </div>
</div>

<div ng-if="documentLibraryManageAccountAccess" class="row">
    <div class="col-2-3">
        <p class="text--semi-bold" translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_ACCOUNT_VISIBILITY"></p>
        <label for="accountVisibility">
            <input type="checkbox" id="accountVisibility" name="allAccounts" ng-model="allAccounts" ng-change="changeOptionsLimit()"/>
        </label>
        <label translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.CHK_VISIBILITY__ALL_ACCOUNTS"></label>        
        <div ng-show="allAccounts === false" class="well">
            <p translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_LIMIT_OR_EXCLUDE"></p>

            <div class="col-1">
                <input type="radio" value="include" id="optionsLimit" name="optionsLimit" ng-model="documentItem.optionsLimit" ng-change="changeAccess()">
                <label for="optionsLimit"><span></span> <span translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.RAD_LIMIT_TO_ACCOUNTS"></span></label>
            </div>
            <div class="col-1">
                <input type="radio" value="exclude" id="optionsLimit" name="optionsLimit" ng-model="documentItem.optionsLimit" ng-change="changeAccess()">
                <label for="optionsLimit"><span></span> <span translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.RAD_EXCLUDE_FROM_ACCOUNTS"></span></label>
            </div>

            <p translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_SELECTED_ACCOUNTS"></p>

            <div class="row">
                <div class="col-1">
                    <table class="table table--responsive table--condensed table--bordered" style="min-height:0;">
                        <thead>
                            <tr>
                                <th translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_GRID_ACCOUNT_NAME"></th>
                                <th translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_GRID_VISIBILITY"></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="account in selectedLibraryAccounts">
                                <td>
                                    <span ng-bind="account.name"></span>
                                </td>
                                <td>
                                    <span ng-if="documentItem.optionsLimit === 'include'" href="#" translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_CAN_SEE"></span>
                                    <span ng-if="documentItem.optionsLimit === 'exclude'" href="#" translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_CAN_NOT_SEE"></span>
                                </td>
                                <td>
                                    <a href="#" ng-click="goToRemoveAccount(account)" translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.CTRL_GRID_REMOVE"></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <strong translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.TXT_ADD_ACCOUNT"></strong>
            <div>
                 <div selectric model="documentItem.accountSelected" options="libraryAccounts" value="accountId" label="name" placeholder="{{'LABEL.COMMON.SELECT' | translate}}">
            </div>
            <button name="selectAccount" class="btn btn--default" type="submit" value="submit" 
                        translate="DOCUMENT_LIBRARY.ADD_NEW_DOCUMENT.BTN_ADD_ACCOUNT" ng-click="goToSelectAccount()"></button>
        </div>
    </div>
</div>
