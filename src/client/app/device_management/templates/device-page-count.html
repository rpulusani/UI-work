<h2 class="vertical-space--none" translate="DEVICE_MAN.MANAGE_DEVICE.TXT_PAGE_COUNTS_TAB"></h2>

<hr />

<div ng-if="errorMessage && errorMessage !== ''" class="alert alert--error" data-js="alert">
<span class="alert__close" data-js="alert-close" aria-hidden="true">Ã—</span><icon class="alert__icon icon icon--small icon--ui icon--error"></icon>
    <div class="alert__body">
    <span >
       {{errorMessage}}
    </span>
    </div>
</div>

<div id="pageCounts-error-popup" class="modal">
    <div class="modal__body">
    <h2 translate="PAGE_COUNTS.WARNING.HEADER"></h2><hr/>
    <p>{{popupMsg}}    
    </p>
    <button class="btn" data-js="modalClose" translate="LABEL.COMMON.OK"></button>
    </div>
</div>

<form check-form-valid  class="form" data-form="" name="devicePageCount" novalidate>
	<table class="table table--condensed table--even table--responsive vertical-space--none">
		<thead>
            <tr>
                <th translate="DEVICE_MGT.PAGE_COUNT_TYPE"></th>
                <th translate="DEVICE_MAN.DEVICE_PAGE_COUNTS.TXT_PAGE_COUNT_CURRENT"></th>
                <th translate="DEVICE_MAN.DEVICE_PAGE_COUNTS.TXT_PAGE_COUNT_NEW"></th>
                <th translate="DEVICE_MAN.DEVICE_PAGE_COUNTS.TXT_PAGE_COUNT_DATE"></th>
            </tr>
        </thead>
		<tbody>
	        <tr ng-repeat="item in meterReads" ng-show="showAllMeterReads || item.type === 'MONO' || item.type === 'LTPC' || item.type === 'COLOR'">
	            <td data-label="{{'DEVICE_MGT.PAGE_COUNT_TYPE' | translate}}" ng-bind="item.type"></td>
	            <td data-label="{{'DEVICE_MAN.DEVICE_PAGE_COUNTS.TXT_PAGE_COUNT_CURRENT' | translate}}">
                    <div ng-bind="item.value"></div>
                    <div ng-bind="getMeterReadPriorDate(item)"></div>
                </td>
	            <td data-label="{{'DEVICE_MAN.DEVICE_PAGE_COUNTS.TXT_PAGE_COUNT_NEW' | translate}}">
	            	<div class="form__field vertical-space--none">
                        <input type="number" ng-model="item.newVal" ng-if="item.type !== 'MONO'" ng-keydown="doNothing($event)" />
                    </div>
                    <span ng-if="item.type === 'MONO'" ng-bind="item.value"></span>
	            </td>
	            <td data-label="{{'DEVICE_MAN.DEVICE_PAGE_COUNTS.TXT_PAGE_COUNT_DATE' | translate}}">
                    <div class="form__field vertical-space--none">
                        <input type="text" id="page-count-date" ng-if="item.type !== 'MONO'" ng-model="item.newDate" date-val="item.newDate" before-eq-now="true" datepicker max="max" min="minDate(item)" time="true" time-interval="60" ng-keydown="doNothing($event)" />
                    </div>
                    <span ng-if="item.type === 'MONO'" ng-bind="getMeterReadPriorDate(item)"></span>
	            </td>
	        </tr>
        </tbody>
    </table>
    <a href="#" ng-click="showAllMeterReads = !showAllMeterReads">
        <span ng-hide="showAllMeterReads" translate="REQUEST_MAN.COMMON.CTRL_PAGE_COUNT_SHOW_MORE"></span>
        <span ng-show="showAllMeterReads" translate="DEVICE_MAN.DEVICE_PAGE_COUNTS.TXT_PAGE_COUNT_VIEW_LESS"></span>
    </a>
    <div class="l-pad-top-2">
	    <button class="btn btn--primary" ng-click="saveMeterReads();" translate="DEVICE_MGT.SUBMIT_PAGE_COUNT_UPDATE"></button>
	</div>
</form>
